<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Linux, Programming, Emacs">
<meta name="viewport" content="width=device-width">
<title>Chen's blog (old posts, page 19) | Chen's blog</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://blog.binchen.org/index-19.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<li><a href="index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="stories/about.html" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/chen_bin" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/redguardtoo" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/use-git-timemachine-with-evil/">Use git-timemachine with Evil</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-04-09T23:47:41+00:00">2015-04-09 23:47</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/use-git-timemachine-with-evil/#disqus_thread" data-disqus-identifier="cache/posts/use-git-timemachine-with-evil.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/git/" rel="tag">git</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
<a href="https://github.com/pidu/git-timemachine">git-timemachine</a> is simple.
</p>

<p>
After "M-x git-timemachine", a new read-only buffer is created and I need only use six key bindings: "n", "q", "p", "w", "W", "g".
</p>

<p>
The problem is I'm using <a href="http://www.emacswiki.org/emacs/Evil">Evil</a>. How to make git-timemachine's key bindings override Evil's?
</p>

<p>
I consulted the issue with Frank Fischer.
</p>

<p>
The solution is simple. Insert below code into ~/.emacs:
</p>

<div class="org-src-container">

<pre><code class="lang-lisp">;; @see https://bitbucket.org/lyro/evil/issue/511/let-certain-minor-modes-key-bindings
(with-eval-after-load 'git-timemachine
  (evil-make-overriding-map git-timemachine-mode-map 'normal)
  ;; force update evil keymaps after git-timemachine-mode loaded
  (add-hook 'git-timemachine-mode-hook #'evil-normalize-keymaps))
</code></pre>

</div>

<p>
I also recommend reading <a href="https://bitbucket.org/lyro/evil/issue/511/let-certain-minor-modes-key-bindings">his in-depth discussion</a> on <b>general handling of keybindings conflict</b> between evil and other minor modes.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/zui-jia-zuo-xi-shi-jian-biao/">最佳作息时间表</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-04-09T05:43:23+00:00">2015-04-09 05:43</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/zui-jia-zuo-xi-shi-jian-biao/#disqus_thread" data-disqus-identifier="cache/posts/zui-jia-zuo-xi-shi-jian-biao.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/health/" rel="tag">health</a></li>
           <li><a class="tag p-category" href="categories/zh/" rel="tag">zh</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-right">7:00</td>
<td class="org-left">起床时刻</td>
<td class="org-left">需要一杯温开水</td>
</tr>
<tr>
<td class="org-right">7:20-8:00</td>
<td class="org-left">丰盛早餐</td>
<td class="org-left">补充血糖要丰盛</td>
</tr>
<tr>
<td class="org-right">8:30-9:00</td>
<td class="org-left">避免运动</td>
<td class="org-left">非运动最佳时间</td>
</tr>
<tr>
<td class="org-right">9:00-10:30</td>
<td class="org-left">困难工作</td>
<td class="org-left">是工作最佳时间</td>
</tr>
<tr>
<td class="org-right">10:30</td>
<td class="org-left">眼睛休息</td>
<td class="org-left">看窗外眼睛累了</td>
</tr>
<tr>
<td class="org-right">11:00</td>
<td class="org-left">吃点水果</td>
<td class="org-left">血糖可能有下降</td>
</tr>
<tr>
<td class="org-right">12:00-12:30</td>
<td class="org-left">多吃豆类</td>
<td class="org-left">豆类是很棒食物</td>
</tr>
<tr>
<td class="org-right">13:00-14:00</td>
<td class="org-left">小睡一会</td>
<td class="org-left">会让你精力充沛</td>
</tr>
<tr>
<td class="org-right">16:00</td>
<td class="org-left">一杯酸奶</td>
<td class="org-left">酸奶零负担零食</td>
</tr>
<tr>
<td class="org-right">19:00</td>
<td class="org-left">锻炼时间</td>
<td class="org-left">快步走慢跑游泳</td>
</tr>
<tr>
<td class="org-right">20:00</td>
<td class="org-left">电视或书</td>
<td class="org-left">工作太辛苦放松</td>
</tr>
<tr>
<td class="org-right">22:00</td>
<td class="org-left">洗热水澡</td>
<td class="org-left">降温清洁利睡眠</td>
</tr>
<tr>
<td class="org-right">22:30</td>
<td class="org-left">上床睡觉</td>
<td class="org-left">保证充足的睡眠</td>
</tr>
</tbody>
</table>
</div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/code-search-in-emacs/">Code search in Emacs</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-04-08T13:09:40+00:00">2015-04-08 13:09</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/code-search-in-emacs/#disqus_thread" data-disqus-identifier="cache/posts/code-search-in-emacs.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/search/" rel="tag">search</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
After shutdown of <a href="http://en.wikipedia.org/wiki/Google_Code_Search">Google Code Search</a>, I turned to plain google search instead.
</p>

<p>
For example, if I want to search Emacs Lisp code. I google "keyword filetype:el".
</p>

<p>
"el" is the file extension of Emacs Lisp file.
</p>

<p>
Since I use Emacs for everything, it's natural to search code in Emacs.
</p>

<p>
So here is my solution.
</p>

<p>
Step 1, install <a href="http://w3m.sourceforge.net/">w3m</a> and <a href="http://melpa.org/#/w3m">its Emacs wrapper</a>.
</p>

<p>
Step 2, insert below code into ~/.emacs:
</p>

<div class="org-src-container">

<pre><code class="lang-lisp">(defun w3m-get-url-from-search-engine-alist (k l)
  (let (rlt)
    (if (listp l)
      (if (string= k (caar l))
          (setq rlt (nth 1 (car l)))
        (setq rlt (w3m-get-url-from-search-engine-alist k (cdr l)))))
    rlt))

(defun w3m-set-url-from-search-engine-alist (k l url)
    (if (listp l)
      (if (string= k (caar l))
          (setcdr (car l) (list url))
        (w3m-set-url-from-search-engine-alist k (cdr l) url))))

;; C-u S g RET &lt;search term&gt; RET in w3m
(setq w3m-search-engine-alist
      '(("g" "http://www.google.com.au/search?q=%s" utf-8)
        ;; stackoverflow search
        ("q" "http://www.google.com.au/search?q=%s+site:stackoverflow.com" utf-8)
        ;; elisp code search
        ("s" "http://www.google.com.au/search?q=%s+filetype:el"  utf-8)
        ;; wikipedia
        ("w" "http://en.wikipedia.org/wiki/Special:Search?search=%s" utf-8)
        ;; online dictionary
        ("d" "http://dictionary.reference.com/search?q=%s" utf-8)
        ;; javascript search on mozilla.org
        ("j" "http://www.google.com.au/search?q=%s+site:developer.mozilla.org" utf-8)))

(defun w3m-google-by-filetype ()
  (interactive)
  (unless (featurep 'w3m)
    (require 'w3m))
  (let ((thing (if (region-active-p)
                   (buffer-substring-no-properties (region-beginning) (region-end))
                 (thing-at-point 'symbol)))
        (old-url (w3m-get-url-from-search-engine-alist "s" w3m-search-engine-alist))
        new-url)
    (when buffer-file-name
      (setq new-url (replace-regexp-in-string
                     "filetype:.*"
                     (concat "filetype:" (file-name-extension buffer-file-name))
                     old-url))
      (w3m-set-url-from-search-engine-alist "s" w3m-search-engine-alist new-url))
    ;; change the url to search current file type
    (w3m-search "s" thing)
    ;; restore the default url
    (w3m-set-url-from-search-engine-alist "s" w3m-search-engine-alist old-url)))
</code></pre>

</div>

<p>
Step 3, `M-x w3m-google-by-filetype`. Either the selected region or the symbol under cursor will be searched.
</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/use-plain-vim-to-merge-conflicts/">Use plain Vim to merge conflicts</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-04-07T07:19:37+00:00">2015-04-07 07:19</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/use-plain-vim-to-merge-conflicts/#disqus_thread" data-disqus-identifier="cache/posts/use-plain-vim-to-merge-conflicts.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/vim/" rel="tag">vim</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
I will explain how to resolve code merge conflicts with plain vim. The only third party plugin required is <a href="https://github.com/tpope/vim-unimpaired">vim-unimpaired</a>.
</p>

<p>
The reason to use vim is that I can't use vimdiff as a merge tool for certain VCS (CVS, Subversion, Perforce, …).
</p>

<div id="outline-container-org3fd53f8" class="outline-2">
<h3 id="org3fd53f8">Problem</h3>
<div class="outline-text-2" id="text-org3fd53f8">
<p>
A typical file in conflict is like:
</p>
<div class="org-src-container">

<pre><code class="lang-diff">hello world
hello world
&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
This is fun stuff!
=======
This is a documentation file
&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r6
bye world
bye world
</code></pre>

</div>

<p>
Let's call lines like "&gt;&gt;&gt;&gt;&gt;&gt;&gt;", "&lt;&lt;&lt;&lt;&lt;&lt;&lt;" and "<code>=====</code>" conflict markers.
</p>

<p>
Resolving conflicts is the operation of picking up <b>either or both</b> of the sections between markers.
</p>
</div>
</div>

<div id="outline-container-orgb980c30" class="outline-2">
<h3 id="orgb980c30">Basic knowledge of Vim</h3>
<div class="outline-text-2" id="text-orgb980c30">
<ul class="org-ul">
<li>"]n" move the focus to the next marker and "[n" to the previous marker.</li>
<li>"dd" delete current line</li>
<li>"d]n" delete from current line to the next marker (next marker exclusive)</li>
</ul>
</div>
</div>

<div id="outline-container-orgfdab05c" class="outline-2">
<h3 id="orgfdab05c">Solution</h3>
<div class="outline-text-2" id="text-orgfdab05c">
<p>
Our workflow is actually simple:
</p>
<ul class="org-ul">
<li>Step 1, find the next marker by pressing "]n"</li>
<li>Step 2, "]nd]n[ndd[ndd" to pick up the section 1</li>
<li>Step 3, "d]ndd]ndd" to pick up  the section 2, go to step 1</li>
</ul>
<p>
This workflow is compatible with any version control software.
</p>

<p>
<b>Optionally</b> you can set the shortcut for step 2 and step 3:
</p>
<div class="org-src-container">

<pre><code class="lang-vimrc">map &lt;leader&gt;dg1 ]nd]n[ndd[ndd
map &lt;leader&gt;dg2 d]ndd]ndd
</code></pre>

</div>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/easy-indentation-setup-in-emacs-for-web-development/">Easy indentation setup in Emacs for web development</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-04-02T13:57:48+00:00">2015-04-02 13:57</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/easy-indentation-setup-in-emacs-for-web-development/#disqus_thread" data-disqus-identifier="cache/posts/easy-indentation-setup-in-emacs-for-web-development.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/indent/" rel="tag">indent</a></li>
           <li><a class="tag p-category" href="categories/web/" rel="tag">web</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
CREATED: <span class="timestamp-wrapper"><span class="timestamp">&lt;2015-04-02 Thu&gt;</span></span>
</p>

<p>
UPDATE: <span class="timestamp-wrapper"><span class="timestamp">&lt;2016-06-22 Wed&gt;</span></span>
</p>

<p>
This question has been asked so many times, so I answered it here once for all.
</p>

<div id="outline-container-org1a89bc9" class="outline-2">
<h3 id="org1a89bc9">Solution</h3>
<div class="outline-text-2" id="text-org1a89bc9">
<p>
Insert below code into ~/.emacs:
</p>
<div class="org-src-container">

<pre><code class="lang-lisp">(defun my-setup-indent (n)
  ;; java/c/c++
  (setq-local c-basic-offset n)
  ;; web development
  (setq-local coffee-tab-width n) ; coffeescript
  (setq-local javascript-indent-level n) ; javascript-mode
  (setq-local js-indent-level n) ; js-mode
  (setq-local js2-basic-offset n) ; js2-mode, in latest js2-mode, it's alias of js-indent-level
  (setq-local web-mode-markup-indent-offset n) ; web-mode, html tag in html file
  (setq-local web-mode-css-indent-offset n) ; web-mode, css in html file
  (setq-local web-mode-code-indent-offset n) ; web-mode, js code in html file
  (setq-local css-indent-offset n) ; css-mode
  )

(defun my-office-code-style ()
  (interactive)
  (message "Office code style!")
  ;; use tab instead of space
  (setq-local indent-tabs-mode t)
  ;; indent 4 spaces width
  (my-setup-indent 4))

(defun my-personal-code-style ()
  (interactive)
  (message "My personal code style!")
  ;; use space instead of tab
  (setq indent-tabs-mode nil)
  ;; indent 2 spaces width
  (my-setup-indent 2))

(defun my-setup-develop-environment ()
  (interactive)
  (let ((proj-dir (file-name-directory (buffer-file-name))))
    ;; if hobby project path contains string "hobby-proj1"
    (if (string-match-p "hobby-proj1" proj-dir)
        (my-personal-code-style))

    ;; if commericial project path contains string "commerical-proj"
    (if (string-match-p "commerical-proj" proj-dir)
        (my-office-code-style))))

;; prog-mode-hook requires emacs24+
(add-hook 'prog-mode-hook 'my-setup-develop-environment)
;; a few major-modes does NOT inherited from prog-mode
(add-hook 'lua-mode-hook 'my-setup-develop-environment)
(add-hook 'web-mode-hook 'my-setup-develop-environment)
</code></pre>

</div>

<p>
You can use `prog-mode-hook` and `buffer-file-name` to do the per project setup easily.
</p>

<p>
For <b>any new programming language</b> not covered in this post, there are two steps:
</p>

<ul class="org-ul">
<li>Know your major-mode by pressing `ALT-X major-mode ENTER`. Say you got "org-mode".</li>

<li>Google "Emacs org-mode indent offset"</li>
</ul>
</div>
</div>

<div id="outline-container-orgc2bc048" class="outline-2">
<h3 id="orgc2bc048">Tips (OPTIONAL)</h3>
<div class="outline-text-2" id="text-orgc2bc048">
<ul class="org-ul">
<li>Please note the first paramter of `string-match-p` is actually <b>regular expression</b>. So you can write regular expression like "\\(/proj1\\|work.org\\)"</li>

<li>Emacs gives you full freedom to setup project. If you prefer per computer setup instead of per project setup, you only need re-write `my-setup-develop-environment',</li>
</ul>
<div class="org-src-container">

<pre><code class="lang-lisp">(defun my-setup-develop-environment ()
  (interactive)
  (let ((hostname (with-temp-buffer
                    (shell-command "hostname" t)
                    (goto-char (point-max))
                    (delete-char -1)
                    (buffer-string))))

  (if (string-match-p "home-pc" hostname)
      (my-personal-code-style))

  (if (string-match-p "office-pc" hostname)
      (my-office-code-style))))
</code></pre>

</div>

<ul class="org-ul">
<li>Instead of press TAB manually to indent code line by line, you can select a region and press `Alt-x indent-region ENTER`</li>

<li>Because I use <a href="http://www.emacswiki.org/emacs/Evil">Evil</a>, indenting the whole file is as simple as pressing `gg=G`</li>
</ul>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/effective-code-navigation-for-web-development/">Effective code navigation for web development</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-04-02T12:51:21+00:00">2015-04-02 12:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/effective-code-navigation-for-web-development/#disqus_thread" data-disqus-identifier="cache/posts/effective-code-navigation-for-web-development.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/ctags/" rel="tag">ctags</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/javascript/" rel="tag">javascript</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
UPDATED: <span class="timestamp-wrapper"><span class="timestamp">&lt;2020-03-27 Fri&gt;</span></span>
</p>

<p>
I use <a href="https://angularjs.org/">AngularJS</a> as an example. The technique is actually generic and not limited to Angular Only.
</p>

<div id="outline-container-org761a4ea" class="outline-2">
<h3 id="org761a4ea">Problem</h3>
<div class="outline-text-2" id="text-org761a4ea">
<p>
In Angular application, a function is defined in a javascript file and called in a html file.
</p>

<p>
Javascript file:
</p>
<div class="org-src-container">

<pre><code class="lang-html">&lt;div ng-controller="MyController" ng-init="init()"&gt;
  &lt;button ng-click="onClick()"&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre>

</div>

<p>
html file:
</p>
<div class="org-src-container">

<pre><code class="lang-javascript">angular.module['myapp'].controller('MyController', function ($scope, $http) {

  $scope.init = function () {
  };

  $scope.onClick= function() {
  };
});
</code></pre>

</div>

<p>
As you can see, the keyword we are interested is just a string, like "MyController". The only way to extract it is <b>regular expression</b>.
</p>

<p>
In this article, I focus on how I combine Emacs and Ctags. If you use other text edit like Visual Studio Code, you <a href="https://marketplace.visualstudio.com/search?term=ctags&amp;target=VSCode&amp;category=All%20categories&amp;sortBy=Relevance">still can use Ctags</a>.
</p>
</div>
</div>

<div id="outline-container-orga963cfb" class="outline-2">
<h3 id="orga963cfb">Solution</h3>
<div class="outline-text-2" id="text-orga963cfb">
<p>
Ctags is good at parsing files with <b>regular expression</b>.
</p>

<p>
I use Ctags because:
</p>
<ul class="org-ul">
<li>New web frameworks keep popping up. I don't want to waste time&amp;money on upgrading IDE from time to time</li>
<li>As a freelancer, I have to deal with in-house frameworks which IDE developers NEVER heard of</li>
<li>Setup of ctags and text editors is easy. Once the first project is set up, others are just five minutes of copy&amp;paste jobs.</li>
</ul>
</div>

<div id="outline-container-org91d2d79" class="outline-3">
<h4 id="org91d2d79">Old solution</h4>
<div class="outline-text-3" id="text-org91d2d79">
<p>
Here is my <a href="https://gist.github.com/redguardtoo/b12ddae3b8010a276e9b#file-ctags">~/.ctags</a>.
</p>

<p>
Please note on Windows, you can place ".ctags" anywhere. Then <a href="http://support.microsoft.com/en-us/kb/310519">create an environment variable</a> named "HOME" whose value is the parent directory of ".ctags".
</p>

<p>
Run <code>ctags -e -R -f /app/path/TAGS</code> at least once to generate tags file named "TAGS".
</p>

<p>
You can use builtin Emacs command <code>find-tag</code> to find tag.
</p>

<p>
If you prefer <a href="https://github.com/emacs-helm/helm">Helm</a> UI, install it and <code>M-x helm-etags-select</code> instead.
</p>

<p>
Please install the latest helm because I <a href="https://github.com/emacs-helm/helm/pull/965">enhanced helm-etags-select</a>.
</p>
</div>
</div>

<div id="outline-container-orgc986548" class="outline-3">
<h4 id="orgc986548">Latest solution (recommended)</h4>
<div class="outline-text-3" id="text-orgc986548">
<p>
I have developed some ctags packages on code completion and code navigation. No manual setup is needed. Everything just works out of box. My packages are very popular in the Emacs community right now,
</p>
<ul class="org-ul">
<li>
<a href="https://github.com/dan-t/rusty-tags#emacs-configuration">rust programming language</a> or any other programming language could be easily supported</li>
<li>Difference between <a href="http://ctags.sourceforge.net/">Exuberant Ctags</a> and <a href="https://github.com/universal-ctags/ctags">Universal Ctags</a> are handled automatically</li>
<li>Extremely fast in big projects (Linux kernel code, for example)</li>
</ul>
<p>
Here are my packages,
</p>
<ul class="org-ul">
<li>
<a href="https://github.com/redguardtoo/counsel-etags">counsel-etags</a> for code navigation</li>
<li>
<a href="https://github.com/redguardtoo/company-ctags">company-ctags</a> for code completion</li>
<li><a href="https://gist.github.com/redguardtoo/b12ddae3b8010a276e9b#file-ctags">~/.ctags</a></li>
</ul>
<p>
Usage is simple, 
</p>
<ul class="org-ul">
<li>Install Ctags and configure it with <code>~/.ctags</code>
</li>
<li>Install <code>company-ctags</code> which dependent on <a href="https://github.com/company-mode/company-mode">company-mode</a>
</li>
<li>Install <code>counsel-etags</code> and start use it immediately like <code>M-x counsel-etags-find-tag-at-point</code>
</li>
<li>Done. The tags file is automatically created and updated from time time</li>
</ul>
</div>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/autocomplete-with-a-dictionary-with-hippie-expand/">Autocomplete with a dictionary and hippie-expand</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-03-30T03:53:40+00:00">2015-03-30 03:53</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/autocomplete-with-a-dictionary-with-hippie-expand/#disqus_thread" data-disqus-identifier="cache/posts/autocomplete-with-a-dictionary-with-hippie-expand.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/autocomplete/" rel="tag">autocomplete</a></li>
           <li><a class="tag p-category" href="categories/dictionary/" rel="tag">dictionary</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
I use <a href="http://company-mode.github.io/">company-mode</a> most of the time. Sometimes I use <a href="http://emacswiki.org/emacs/HippieExpand">Hippie Expand</a> to autocomplete the English words from a dictionary.
</p>

<p>
I surely can do this in company-mode too. But I prefer hippie-expand because I choose to make company-mode focus on programming stuff and hippie-expand on writing.
</p>

<div id="outline-container-orgb82a01a" class="outline-2">
<h3 id="orgb82a01a">Solution</h3>
<div class="outline-text-2" id="text-orgb82a01a">
<p>
This solution works <b>in any environment</b>.
</p>

<ul class="org-ul">
<li>Step1 (OPTIONAL), download <a href="https://github.com/redguardtoo/emacs.d/raw/master/misc/english-words.txt">english-words.txt</a> and place it under "~/.emacs.d/misc/".</li>

<li>Step 2, Copy below setup into ~/.emacs and use key binding "M-/" to complete the word:</li>
</ul>
<div class="org-src-container">

<pre><code class="lang-lisp">(global-set-key (kbd "M-/") 'hippie-expand)

;; The actual expansion function
(defun try-expand-by-dict (old)
  ;; old is true if we have already attempted an expansion
  (unless (bound-and-true-p ispell-minor-mode)
    (ispell-minor-mode 1))

  ;; english-words.txt is the fallback dicitonary
  (if (not ispell-alternate-dictionary)
      (setq ispell-alternate-dictionary (file-truename "~/.emacs.d/misc/english-words.txt")))
  (let ((lookup-func (if (fboundp 'ispell-lookup-words)
                       'ispell-lookup-words
                       'lookup-words)))
    (unless old
      (he-init-string (he-lisp-symbol-beg) (point))
      (if (not (he-string-member he-search-string he-tried-table))
        (setq he-tried-table (cons he-search-string he-tried-table)))
      (setq he-expand-list
            (and (not (equal he-search-string ""))
                 (funcall lookup-func (concat (buffer-substring-no-properties (he-lisp-symbol-beg) (point)) "*")))))
    (if (null he-expand-list)
      (if old (he-reset-string))
      (he-substitute-string (car he-expand-list))
      (setq he-expand-list (cdr he-expand-list))
      t)
    ))

(setq hippie-expand-try-functions-list
      '(;; try-expand-dabbrev
        ;; try-expand-dabbrev-all-buffers
        try-expand-by-dict))
</code></pre>

</div>
</div>
</div>

<div id="outline-container-orgbf6e390" class="outline-2">
<h3 id="orgbf6e390">Technical details</h3>
<div class="outline-text-2" id="text-orgbf6e390">
<ul class="org-ul">
<li>based on <a href="https://github.com/syohex/emacs-ac-ispell">ac-ispell</a>
</li>
<li>lazy load of ispell-mode to speed Emacs startup</li>
<li>add a fallback dictionary "english-words.txt" so autocompletion never fails</li>
<li>`ispell-lookup-words` or `lookup-words` simply does grep thing, so english-words.txt is just a plain text file.</li>
</ul>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/why-people-say-emacs-is-the-best-operating-system/">Why people say "Emacs is the best operating system"</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-02-01T09:40:44+00:00">2015-02-01 09:40</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/why-people-say-emacs-is-the-best-operating-system/#disqus_thread" data-disqus-identifier="cache/posts/why-people-say-emacs-is-the-best-operating-system.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/font/" rel="tag">font</a></li>
           <li><a class="tag p-category" href="categories/linux/" rel="tag">linux</a></li>
           <li><a class="tag p-category" href="categories/terminal/" rel="tag">terminal</a></li>
           <li><a class="tag p-category" href="categories/terminator/" rel="tag">terminator</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
 people say "Emacs is the best operating system"                           :en:emacs:font:linux:terminal:terminator:
It's becasue Emacs has great documentation and enough APIs.
</p>

<div id="outline-container-sec-1" class="outline-2">

<div class="outline-text-2" id="text-1">
<p>
Emacs manual even helps me even on non-Emacs stuff.
</p>

<p>
When configuring the font for <a href="http://gnometerminator.blogspot.com/p/introduction.html">Terminator</a> (a terminal emulator) I find its manual is NOT clear. The manual doesn't explain what is "Pango font name". But Emacs manual provides all I need.
</p>

<p>
<code>fc-list</code> is to list installed fonts. Since terminal use Mono font, I can type below command:
</p>
<div class="org-src-container">


<pre><code class="lang-bash">fc-list | grep Mono
</code></pre>

</div>

<p>
The output is like:
</p>

<pre class="example">
/usr/share/fonts/urw-fonts/n022003l.pfb: Nimbus Mono L:style=Regular
/usr/share/fonts/urw-fonts/n022024l.pfb: Nimbus Mono L:style=Bold Oblique
/usr/share/fonts/liberation-fonts/LiberationMono-Regular.ttf: Liberation Mono:style=Regular
/usr/share/fonts/urw-fonts/n022004l.pfb: Nimbus Mono L:style=Bold
/usr/share/fonts/liberation-fonts/LiberationMono-BoldItalic.ttf: Liberation Mono:style=Bold Italic
/usr/share/fonts/liberation-fonts/LiberationMono-Bold.ttf: Liberation Mono:style=Bold
/usr/share/fonts/wqy-zenhei/wqy-zenhei.ttc: 文泉驿等宽正黑,文泉驛等寬正黑,WenQuanYi Zen Hei Mono:style=Medium,中等
/usr/share/fonts/liberation-fonts/LiberationMono-Italic.ttf: Liberation Mhttp://blog.binchen.org/posts/why-people-say-emacs-is-the-best-operating-system.htmlono:style=Italic
/usr/share/fonts/urw-fonts/n022023l.pfb: Nimbus Mono L:style=Regular Oblique
</pre>

<p>
Since Emacs manual explains the meaning of output, I know the font name "WenQuanYi Zen Hei Mono" is the key component of "Pango font name"
</p>

<p>
Because the manual also gives the details of other components of "Pango font name", the final "~/.config/terminator/config" is like:
</p>

<div class="org-src-container">


<pre><code class="lang-conf">[profiles]
  [[default]]
  use_system_font = False
  # @see emacs manual for tools and explanation of font formats
  # https://www.gnu.org/software/emacs/manual/html_node/emacs/GTK-Resource-Basics.html
  # https://www.gnu.org/software/emacs/manual/html_node/emacs/Fonts.html#Fonts
  font =  WenQuanYi Zen Hei Mono 16
</code></pre>

</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h3 id="sec-2">API</h3>
<div class="outline-text-2" id="text-2">
<p>
I create a new Emacs plugin which lists file names containing Chinese characters. At beginning I use Emacs API "find-name-dired". It uses the GNU find as the backend. But there is some integration issue on Linux. Chinese file names are displayed as garbled text in Emacs. I guess there is some decode/encode error between the interaction of Emacs process and GNU find process because Chinese files are fine on OS X.
</p>

<p>
Emacs has enough APIs. Later I found another pure Lisp API "find-lisp-find-dired". Problem solved.
</p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/demo-blog-1/">Demo blog post created by nikola&amp;org2nikola</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-01-25T10:11:19+00:00">2015-01-25 10:11</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/demo-blog-1/#disqus_thread" data-disqus-identifier="cache/posts/demo-blog-1.html">Comments</a>


                </div>
            

            </div>
            <div class="body">
                <div>
<p>
python code:
</p>

<div class="org-src-container">

<pre><code class="lang-python">
import getopt, sys
if __name__ == '__main__':
    opts, args = getopt.getopt(sys.argv[1:], "hf:", ["help", "file="])
    for o, a in opts:
        if o in ("-h", "--help"):
            sys.exit()
        else:
            assert False, "unhandled option"
    print "hello world";
</code></pre>

</div>

<p>
This is table:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<thead><tr>
<th scope="col" class="left">Name</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Alternatives</th>
</tr></thead>
<tbody>
<tr>
<td class="left"><a href="http://www.emacswiki.org/emacs/Evil">Evil</a></td>
<td class="left">convert Emacs into vim</td>
<td class="left">none</td>
</tr>
<tr>
<td class="left"><a href="http://orgmode.org">org-mode</a></td>
<td class="left"><a href="http://en.wikipedia.org/wiki/Getting_Things_Done">Get Things Done (GTD)</a></td>
<td class="left">none</td>
</tr>
<tr>
<td class="left"><a href="https://github.com/company-mode/company-mode">company-mode</a></td>
<td class="left">code completion</td>
<td class="left">auto-complete</td>
</tr>
<tr>
<td class="left"><a href="https://github.com/magnars/expand-region.el">expand-region</a></td>
<td class="left">selection region efficiently</td>
<td class="left">none</td>
</tr>
</tbody>
</table>
<p>
This is list:
</p>

<ul class="org-ul">
<li>list item 1
</li>
<li>list item 2
</li>
<li>list item 3
</li>
<li>list item 4
</li>
</ul>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/demo-blog-post-created-by-nikolaorg2nikola/">Demo blog post created by nikola&amp;org2nikola</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2015-01-25T10:11:19+00:00">2015-01-25 10:11</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/demo-blog-post-created-by-nikolaorg2nikola/#disqus_thread" data-disqus-identifier="cache/posts/demo-blog-post-created-by-nikolaorg2nikola.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/blog/" rel="tag">blog</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/nikola/" rel="tag">nikola</a></li>
           <li><a class="tag p-category" href="categories/org2nikola/" rel="tag">org2nikola</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>
python code:
</p>

<div class="org-src-container">

<pre><code class="lang-python">import getopt, sys
if __name__ == '__main__':
    opts, args = getopt.getopt(sys.argv[1:], "hf:", ["help", "file="])
    for o, a in opts:
        if o in ("-h", "--help"):
            sys.exit()
        else:
            assert False, "unhandled option"
    print "hello world";
</code></pre>

</div>

<p>
This is table:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Alternatives</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><a href="http://www.emacswiki.org/emacs/Evil">Evil</a></td>
<td class="org-left">convert Emacs into vim</td>
<td class="org-left">none</td>
</tr>
<tr>
<td class="org-left"><a href="http://orgmode.org">org-mode</a></td>
<td class="org-left"><a href="http://en.wikipedia.org/wiki/Getting_Things_Done">Get Things Done (GTD)</a></td>
<td class="org-left">none</td>
</tr>
<tr>
<td class="org-left"><a href="https://github.com/company-mode/company-mode">company-mode</a></td>
<td class="org-left">code completion</td>
<td class="org-left">auto-complete</td>
</tr>
<tr>
<td class="org-left"><a href="https://github.com/magnars/expand-region.el">expand-region</a></td>
<td class="org-left">selection region efficiently</td>
<td class="org-left">none</td>
</tr>
</tbody>
</table>
<p>
This is list:
</p>

<ul class="org-ul">
<li>list item 1</li>
<li>list item 2</li>
<li>list item 3</li>
<li>list item 4</li>
</ul>
</div>
            </div>
        </div>
    
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-20.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-18.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="chenbin0";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2020         <a href="mailto:chenbin.sh@gmail.com">Chen Bin</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
         document.addEventListener('DOMContentLoaded', function() {
           var items = document.getElementsByClassName('timeago'), e, pd;
           for (var i = 0; i < items.length; i++) {
             e = items[i];
             pd = moment(new Date(e.getAttribute('datetime')));
             e.innerHTML = pd.fromNow();
             e.setAttribute('title', pd.format('LLLL'));
           }
         });
        </script>
</body>
</html>
