<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Linux, Programming, Emacs">
<meta name="viewport" content="width=device-width">
<title>Chen's blog (old posts, page 6) | Chen's blog</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://blog.binchen.org/index-6.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<li><a href="index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="stories/about.html" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/chen_bin" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/redguardtoo" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/yong-org2blog-emacs-fa-biao-bo-ke/">用org2blog+emacs发表博客</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-12-26T09:16:27+00:00">2012-12-26 09:16</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/yong-org2blog-emacs-fa-biao-bo-ke/#disqus_thread" data-disqus-identifier="cache/posts/yong-org2blog-emacs-fa-biao-bo-ke.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/blog/" rel="tag">blog</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/org2blog/" rel="tag">org2blog</a></li>
           <li><a class="tag p-category" href="categories/zh/" rel="tag">zh</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>
我有兴趣开始写博,完全是因为我开始爱上emacs.
</p>

<p>
<a href="http://blog.nethazard.net/post-to-wordpress-blogs-with-emacs-org-mode">有人</a>说emacs的插件<a href="https://github.com/punchagan/org2blog">org2blog</a>使的写博客非常高效，我就想试试.
</p>

<p>
我(计划)把所有的文章都放在一个org文件里(BTW,我爱死<a href="http://orgmode.org">org-mode</a>了,它本来是做计划管理和日志的,但事实上是无所不能),然后 <code>M-x org2blog/wp-post-subtree</code> 发表.
</p>

<p>
要正常使用org2blog,必需安装最新的org-mode(我的版本为7.5, <code>M-x org-version</code> 检查当前版本,警告,<a href="https://github.com/punchagan/org2blog/issues/46">7.5不可靠</a>,应升级到最新版本,我用从git服务器取得"d6aba4db"版本).
</p>

<p>
emacs(版本23.3.1)自带的org-mode太老,和最新的org2blog(<span class="timestamp-wrapper"><span class="timestamp">&lt;2011-04-12 Tue&gt;</span></span>的版本)不兼容.
</p>

<p>
org2blog安装步骤在上文的链接里都有,也可以参看<a href="http://objectcommando.com/blog/2011/01/25/blogging-with-org2blog/">Blogging with org2blog</a>.
</p>

<p>
org-mode安装步骤见<a href="http://orgmode.org/guide/Installation.html#Installation">官方文档</a>.
</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/emacs-lisp-bin-bu-nan-xue/">Emacs Lisp并不难学</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-11-29T21:00:00+00:00">2012-11-29 21:00</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/emacs-lisp-bin-bu-nan-xue/#disqus_thread" data-disqus-identifier="cache/posts/emacs-lisp-bin-bu-nan-xue.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/elisp/" rel="tag">elisp</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/essential/" rel="tag">essential</a></li>
           <li><a class="tag p-category" href="categories/lisp/" rel="tag">lisp</a></li>
           <li><a class="tag p-category" href="categories/zh/" rel="tag">zh</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>作者:陈斌 (redguardtoo) </p> <p> 原创日期: <span class="timestamp-wrapper"> <span class="timestamp">2012-11-30 五</span></span> </p> <p> 本文的目的是把Lisp去神秘化. </p> <p> 我学的是Emacs Lisp(Emacs Lisp),开发环境也是Emacs.所以我举的例子都是只基于Elisp. </p> <p> 本文针对的读者是有相当经验的开发者,目的是尽可能简明扼要地突出重点. </p> <p> 我对于目前的主流开发语言都很熟悉,但是Lisp还只能算是入门水准,所以错过很多Lisp精彩之处是很可能的. </p> <p> 我所谓的重点,主要是指Lisp对于开发一个现实世界的产品有什么优点. </p>  <div id="outline-container-1" class="outline-3"> <h4 id="sec-1">所有的函数和数据可以在系统运行时改变</h4> <div class="outline-text-3" id="text-1">  <p>其意义是,假设你一个系统上线了,你可以随时改变正在运行的代码,不需要重启系统. </p> <p> 我的理解是,一个函数实际上就是带有字符串Key(该key就是函数名)的数据,运行某个函数就是在系统运行时根据Key找到对应的数据(或者代码,在Lips中是一回事)运行之. </p> <p> 例如,我可以在hook中申明某个函数将被调用,而这个函数的定义可以还不存在.系统在*运行时*才会去寻找这个函数.解释一下,hook可以认为是事件触发机制,就是在系统运行的某个时刻调用用户自定义的函数) </p> <p> 优点是灵活性很高.缺点是Lisp写的东西快不了. </p>
</div>  </div>  <div id="outline-container-2" class="outline-3"> <h4 id="sec-2">没有namespace,所有的函数默认都是可以全局访问的</h4> <div class="outline-text-3" id="text-2">  <p>正因为这两条,所以要多打字(每个函数都要手动输入名字前缀). </p> <p> 这点我完全可以接受,没有namespace就是多打点字而已.那些不了解历史或者没有用过C的初级程序员可能会大惊小怪.实际上没什么大不了的. </p> <p> 所有函数都可以访问在Emacs场景下有个巨大的优点,见下一条. </p>
</div>  </div>  <div id="outline-container-3" class="outline-3"> <h4 id="sec-3">defadivce可以改变系统中任意函数的行为.</h4> <div class="outline-text-3" id="text-3">  <p>defadvice可以重定义系统中的任意函数.原因如前文所说. </p>
</div>  </div>  <div id="outline-container-4" class="outline-3"> <h4 id="sec-4">循环语句和条件判断语句</h4> <div class="outline-text-3" id="text-4">  <p>和其他语言没什么不同,foreach之类的语法糖也不少. </p> <p> 我唯一不喜欢的是没有C中的return,break,和continue语句,这样的缺点是有可能让代码嵌套过深. </p> <p> 不过不是什么大不了的问题,Lisp也提供了一些替代语法. </p> <p> 另外其他所有语言提供了这些语法糖又怎么样呢,我遇到的超过50%的程序员还是一样瞎写. </p>
</div>  </div>  <div id="outline-container-5" class="outline-3"> <h4 id="sec-5">不同寻常的语法</h4> <div class="outline-text-3" id="text-5">  <p>Lisp语法是操作符号在前,被操作对象在后. </p> <p> 例如2+3+4,在Lisp的语法中是这样的: </p>   <pre class="src src-elisp">(+ 2 3 4)
</pre>   <p> 所有的语法都是这样的前缀表达式(<a href="http://zh.wikipedia.org/wiki/%E6%B3%A2%E5%85%B0%E8%A1%A8%E7%A4%BA%E6%B3%95">Polish Notation</a>),很多人不习惯这样的语法,但是它有一些突出优点: </p> <ol>
<li>这样的语法做语法解析特别容易,所以第三方支持工具很容易开发. 在大规模系统开发时,这点很有用.例如,分析大型项目的源代码时,你能唯一依靠的grep和正则表达式,ELisp简单严格的语法使得正则表达式很好写.  </li> <li>实际编程时少打很多运算符号,这对于有实战经验的程序员是巨大的优点.如果你和我说什么重要的是思想和设计模式,打字速度不重要,那么菜鸟请走开.  </li> <li>最重要的优点是,这种语法相当于一种过滤机制,能够接受这种语法的人通常都是头脑比较开放思维敏捷的人.说到底产品开发的决定性因素是人,所以这个能过滤人的优点是决定性的. </li> </ol>
</div>  </div>  <div id="outline-container-6" class="outline-3"> <h4 id="sec-6">函数可内嵌文档,且该文档可被Emacs帮助系统调用</h4> <div class="outline-text-3" id="text-6">  <p>现在能做到这点的系统也没几家.从细节我们可以看出Emacs和Elisp的完美之处. </p>
</div> </div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/how-to-manage-and-use-tags-file-of-third-party-libraries-in-emacs/">How to use ctags with Emacs effectively</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-11-22T15:35:00+00:00">2012-11-22 15:35</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/how-to-manage-and-use-tags-file-of-third-party-libraries-in-emacs/#disqus_thread" data-disqus-identifier="cache/posts/how-to-manage-and-use-tags-file-of-third-party-libraries-in-emacs.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/ctags/" rel="tag">ctags</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>
<b>UPDATE</b> on <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-02-24 Sat&gt;</span></span>:
I released <a href="https://github.com/redguardtoo/counsel-etags">counsel-etags</a>, a complete solution for Ctags/Emacs.
</p>

<p>
<b>ORIGINAL CONTENT</b>:
</p>

<p>
See <a href="http://emacswiki.org/emacs/EmacsTags">http://emacswiki.org/emacs/EmacsTags</a> for general usage of tags file. A file name of tags files is <code>TAGS</code> by default. But in Emacs manual the <code>tags file</code> is named <code>tags table</code>. Either <code>tags file</code> or <code>tags table</code> or <code>TAGS</code> is only different name for the same thing.
</p>

<p>
According wiki page, people usually use ctags to do two things,
</p>
<ul class="org-ul">
<li>Code navigation</li>
<li>Auto-complete/IntelliSense</li>
</ul>
<p>
In my opinion, ctags is OK for code navigation because it's integrated into Emacs well and ctags supports more programming language. But ctags only uses regular expression to analyze the code. So it's not as precise as professional tools like <a href="http://cscope.sourceforge.net/">cscope</a> or <a href="http://www.gnu.org/software/global">GNU Global</a>. According to my own experience, ctags plus grep is actually good enough for code navigation in big enterprise projects with mixed environments. If you are among a few talented geeks who are developing Linux Kernel in the most efficient way, you should use better tools like <a href="http://www.gnu.org/software/global">GNU Global</a>. See the head up from <a href="https://plus.google.com/113859563190964307534/posts/Ayr687eH451">Nick Alcock</a>. His summary of the Pro/Con of GNU Global is great.
</p>

<p>
IntelliSense is a different story. For programming languages like Javascript, ctags provide some IntelliSense with is better than nothing. C++ is a more complex language which is a litter harder for ctags to handle unless you are not using those "advanced" features of C++.
</p>

<p>
I found one missing piece from EmacsWiki is the tip on how to <b>manage tags file</b> easily when the TAGS is built from some code of third party libraries (<a href="http://http//en.wikipedia.org/wiki/Qt_%28framework%29">QT</a>, <a href="http://www.wxwidgets.org">wxWidgets</a>, <a href="http://www.gtk.org">GTK</a>, <a href="http://www.boost.org">Boost</a>, just name a few).
</p>

<p>
My typical work flow is:
</p>
<ul class="org-ul">
<li>Load the tags file for my own code.</li>
<li>Load other tags files built from third party libraries related to my current task.</li>
<li>Unload third party tags immediately if its not needed.</li>
</ul>
<p>
The purpose to load tags files is to look up API easily. For example, I use C++ library <a href="http://wxwidgets.org">wxWidgets</a> to develop my application. I want to use its API called <code>wxWindow::Maximize</code>. I type <code>M-x find-tag</code> and input the keyword <code>Maximize</code>. So I can check the function definition and know what parameters I need fill in to use "Maximize".
</p>

<p>
The reason to do the unload thing is to avoid function name conflict from some tags files. EmacsWiki has a section "Choosing Among Multiple Tags for the Same Name" to solve this problem. But unloading is more convenient. In theory, it would be annoying if I need repeat load and unload the same tags files. In reality, it seldom happens because if I need work on Javascript (so I unload C++ related TAGS), I will usually keep working on Javascript until the end of the day.
</p>
<div id="outline-container-org7efc9da" class="outline-2">
<h3 id="org7efc9da">Produce tags files for all the environments</h3>
<div class="outline-text-2" id="text-org7efc9da">
<p>
For example, I produce tags files of Library A for Mac and Linux. I put tags file from Mac at directory "/home/cb/tags/Library_A/mac" and file from Linux at <code>/home/cb/tags/Library_A/linux</code>.
</p>
</div>
</div>
<div id="outline-container-orgf5f0ac7" class="outline-2">
<h3 id="orgf5f0ac7">Use git and github to manage the tags files</h3>
<div class="outline-text-2" id="text-orgf5f0ac7">
<p>
So I can have copies of the tags files at github server and my local computers. That's also a part of my strategy to setup the development environment. My projects on different computers usually use same external library.
</p>

<p>
EmacsWiki discusses how to update your tags file frequently because your own code are updated frequently. But the tags file from a big library like wxWidgets need not be updated to often because I only use limited old APIs in that library.
</p>
</div>
</div>
<div id="outline-container-org1217ba3" class="outline-2">
<h3 id="org1217ba3">Write emacs lisp code to load/unload these tags files</h3>
<div class="outline-text-2" id="text-org1217ba3">
<p>
Here is the code. In this example, if I need load tags file for <a href="http://www.wxwidgets.org">wxWidgets</a>, I call the function "add-wx-tags". If I need unload the tags file, I press "Ctrl-u" and call the same function "add-wx-tags". Since I use <a href="http://www.emacswiki.org/Smex">Smex</a>, calling function doesn't mean pressing many keys.
</p>
<div class="org-src-container">

<pre><code class="lang-lisp">; Set up tags built from third party libraries ===begin
; define tags alias like "wx-tags" here
(setq wx-tags (expand-file-name "~/tags/wx/osx/TAGS"))

; @see &lt;Selecting a Tags Table&gt; in Emacs manual for details.
; We only change the list "tags-table-list". It is documented officialy.
(defun insert-into-tags-table-list(e)
  (add-to-list 'tags-table-list e t))
(defun delete-from-tags-table-list (e)
  (setq tags-table-list (delete e tags-table-list)))
; This is a sample command, all you need is copy/paste this template
; for other new commands
(defun add-wx-tags (&amp;optional del)
  "Add or delete(C-u) wxWidgets tags into tags-table-list"
  (interactive "P")
  (let (mytags)
    ; here add your third party tags files
    ; Usually you need load/unload tags files combination in one command
    ; change below line to add them
    (setq mytags (list wx-tags))
    (if del (mapc 'delete-from-tags-table-list mytags)
      (mapc 'insert-into-tags-table-list mytags))))
</code></pre>

</div>

<p>
This solution only uses one standard variable <code>tags-table-list</code> in Emacs. So it will always work with any other Emacs plugins you install. And you can use all the old hotkeys and functions ("find-tag", for example) without any problem.
</p>

<p>
See <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Select-Tags-Table.html">Emacs manual</a> for technical details.
</p>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/my-personal-emacs-customization-customel/">My personal emacs customization (custom.el)</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-11-16T12:10:02+00:00">2012-11-16 12:10</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/my-personal-emacs-customization-customel/#disqus_thread" data-disqus-identifier="cache/posts/my-personal-emacs-customization-customel.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/personal/" rel="tag">personal</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>
custom.el is my personal emacs configuration. I use it with my publicized <a href="https://github.com/redguardtoo/emacs.d">Emacs configuration</a>.
</p>

<div class="org-src-container">

<pre><code class="lang-lisp">;; I'm in Australia now
;; I'm in Australia now
(setq system-time-locale "C")

;; {{ stardict
(setq sdcv-dictionary-simple-list '("朗道英汉字典5.0"))
(setq sdcv-dictionary-complete-list '("WordNet"))
;; }}

;; {{ elpa-mirror
(setq elpamr-default-output-directory "~/myelpa")
(setq elpamr-repository-name "myelpa")
(setq elpamr-repository-path "https://dl.dropboxusercontent.com/u/858862/myelpa/")
(setq elpamr-email "myname@mydomain.com")
;; }}

;; lock my package
(if (file-readable-p (expand-file-name "~/Dropbox/Public/myelpa/archive-contents"))
     (setq package-archives '(("myelpa" . "~/Dropbox/Public/myelpa/"))))

;; {{ Set up third party tags
(defun insert-into-tags-table-list(e)
  (add-to-list 'tags-table-list e t)
  )
(defun delete-from-tags-table-list (e)
  (setq tags-table-list (delete e tags-table-list))
  )

(defun add-wx-tags (&amp;optional del)
  "Add or delete(C-u) wxWidgets tags into tags-table-list"
  (interactive "P")
  (let (mytags)
    ; here add your third party tags
    (setq mytags (list "~/tags/wx/osx/TAGS"))
    (if del (mapc 'delete-from-tags-table-list mytags)
      (mapc 'insert-into-tags-table-list mytags)
      )
    )
  )
;; }}

;; (getenv "HOSTNAME") won't work because $HOSTNAME is not an env variable
;; (system-name) won't work because as Optus required, my /etc/hosts is changed
(defun my/at-office ()
  (interactive)
  (let ((my-hostname (with-temp-buffer
                       (shell-command "hostname" t)
                       (goto-char (point-max))
                       (delete-char -1)
                       (buffer-string))
                     ))
    (and (string= my-hostname "my-sydney-workpc")
         (not (or (string= my-hostname "sydneypc")
                  (string= my-hostname "ChenBinMacAir")
                  (string= my-hostname "eee")
                  )))
    ))

(defun my/use-office-style ()
  (interactive)
  (let ((dir (if (buffer-file-name)
                 (file-name-directory (buffer-file-name))
               "")))
    (string-match-p "CompanyProject" dir)
    ))

(defun my/setup-develop-environment ()
  (cond
   ((my/use-office-style)
    (message "Office code style!")
    (setq coffee-tab-width 4)
    (setq javascript-indent-level 4)
    (setq js-indent-level 4)
    (setq js2-basic-offset 4)
    (setq web-mode-indent-style 4))
   (t
    (message "My code style!")
    (setq coffee-tab-width 4)
    (setq javascript-indent-level 2)
    (setq js-indent-level 2)
    (setq js2-basic-offset 2)
    (setq web-mode-indent-style 2))
   ))

(add-hook 'js2-mode-hook 'my/setup-develop-environment)
(add-hook 'web-mode-hook 'my/setup-develop-environment)

(my/setup-develop-environment)

;; {{ gnus setup
(require 'nnir)

;; ask encyption password once
(setq epa-file-cache-passphrase-for-symmetric-encryption t)


;;@see http://www.emacswiki.org/emacs/GnusGmail#toc1
;; (add-to-list 'gnus-secondary-select-methods '(nntp "news.gmane.org"))
;; (add-to-list 'gnus-secondary-select-methods '(nntp "news.gwene.org"))
(if (my/at-office)
    (add-to-list 'gnus-secondary-select-methods '(nnml "optus"))
    (setq mail-sources
      '((pop :server "localhost"
         :port 1110
         :user "CP111111"
         :password "MyPassword"
         :stream network)))
    )


(setq gnus-select-method
             '(nnimap "gmail"
                      (nnimap-address "imap.gmail.com")
                      (nnimap-server-port 993)
                      (nnimap-stream ssl)
                      (nnir-search-engine imap)
                      (nnimap-authinfo-file "~/.authinfo.gpg")
                      ; @see http://www.gnu.org/software/emacs/manual/html_node/gnus/Expiring-Mail.html
                      ;; press 'E' to expire email
                      (nnmail-expiry-target "nnimap+gmail:[Gmail]/Trash")
                      (nnmail-expiry-wait 90)
                      ))

;;@see http://gnus.org/manual/gnus_397.html
;; (add-to-list 'gnus-secondary-select-methods
;;              )

(setq-default
  gnus-summary-line-format "%U%R%z %(%&amp;user-date;  %-15,15f  %B%s%)\n"
  gnus-user-date-format-alist '((t . "%Y-%m-%d %H:%M"))
  gnus-summary-thread-gathering-function 'gnus-gather-threads-by-references
  gnus-sum-thread-tree-false-root ""
  gnus-sum-thread-tree-indent ""
  gnus-sum-thread-tree-leaf-with-other "-&gt; "
  gnus-sum-thread-tree-root ""
  gnus-sum-thread-tree-single-leaf "|_ "
  gnus-sum-thread-tree-vertical "|")
(setq gnus-thread-sort-functions
      '(
        (not gnus-thread-sort-by-date)
        (not gnus-thread-sort-by-number)
        ))

;; we want to browse freely from gwene (RSS)
(setq gnus-safe-html-newsgroups "\\`nntp[+:]news\\.gwene\\.org[+:]")

; NO 'passive
(setq gnus-use-cache t)
(setq gnus-use-adaptive-scoring t)
(setq gnus-save-score t)
(add-hook 'mail-citation-hook 'sc-cite-original)
(add-hook 'message-sent-hook 'gnus-score-followup-article)
(add-hook 'message-sent-hook 'gnus-score-followup-thread)
; @see http://stackoverflow.com/questions/945419/how-dont-use-gnus-adaptive-scoring-in-some-newsgroups
(setq gnus-parameters
      '(("nnimap.*"
         (gnus-use-scoring nil)) ;scoring is annoying when I check latest email
        ))

(defvar gnus-default-adaptive-score-alist
  '((gnus-kill-file-mark (from -10))
    (gnus-unread-mark)
    (gnus-read-mark (from 10) (subject 30))
    (gnus-catchup-mark (subject -10))
    (gnus-killed-mark (from -1) (subject -30))
    (gnus-del-mark (from -2) (subject -15))
    (gnus-ticked-mark (from 10))
    (gnus-dormant-mark (from 5))))

;; Fetch only part of the article if we can.  I saw this in someone
;; else's .gnus
(setq gnus-read-active-file 'some)

;; Tree view for groups.  I like the organisational feel this has.
(add-hook 'gnus-group-mode-hook 'gnus-topic-mode)

;; Threads!  I hate reading un-threaded email -- especially mailing
;; lists.  This helps a ton!
(setq gnus-summary-thread-gathering-function
      'gnus-gather-threads-by-subject)

;; Also, I prefer to see only the top level message.  If a message has
;; several replies or is part of a thread, only show the first
;; message.  'gnus-thread-ignore-subject' will ignore the subject and
;; look at 'In-Reply-To:' and 'References:' headers.
(setq gnus-thread-hide-subtree t)
(setq gnus-thread-ignore-subject t)

; Personal Information
(setq user-full-name "My Name"
      user-mail-address (if (my/at-office) "myname@office.com" "myname@mydomain.com")
      )

;; Change email address for work folder.  This is one of the most
;; interesting features of Gnus.  I plan on adding custom .sigs soon
;; for different mailing lists.
;; Usage, FROM: chen bin &lt;work&gt;
(setq gnus-posting-styles
      '((".*"
         (name "My Name"
          (address "myname@mydomain.com"
                   (organization "")
                   (signature-file "~/.signature")
                   ("X-Troll" "Emacs is better than Vi")
                   )))))


(setq mm-text-html-renderer 'w3m)

;; http://www.gnu.org/software/emacs/manual/html_node/gnus/_005b9_002e2_005d.html
(setq gnus-use-correct-string-widths nil)
;; @see http://emacs.1067599.n5.nabble.com/gnus-compile-td221680.html
;;(gnus-compile)
; =Gnus Tips=
;; @see http://www.scottmcpeak.com/gnus.html
;; }}
</code></pre>

</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/how-to-use-ftp-in-emacs/">How to use FTP in Emacs</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-11-11T13:05:00+00:00">2012-11-11 13:05</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/how-to-use-ftp-in-emacs/#disqus_thread" data-disqus-identifier="cache/posts/how-to-use-ftp-in-emacs.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/ftp/" rel="tag">ftp</a></li>
           <li><a class="tag p-category" href="categories/linux/" rel="tag">linux</a></li>
           <li><a class="tag p-category" href="categories/mac/" rel="tag">mac</a></li>
           <li><a class="tag p-category" href="categories/mount/" rel="tag">mount</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>Emacs's default <a href="http://www.emacswiki.org/AngeFtp">Ftp client</a> is a little outdated compared to other modern Ftp clients. </p> <p> What I want is a two panel file explorer with ftp client integrated (An excellent example is <a href="http://www.ghisler.com">Total Commander</a> on windows). </p> <p> In Emacs, I've got <a href="http://emacswiki.org/emacs/Sunrise_Commander">Sunrise Commander</a> which is close to Total Commander, but NO Ftp integration. </p> <p> I dig around the internet for a while and find that the perfect solution is mount the ftp server into my local file system with <a href="http://curlftpfs.sourceforge.net">CurlFtpFS</a>. </p> <p> The best part of this solution is CurlFtpFS supports both OS X and Linux. </p> <p> In order to install CurlFtpFS on OS X, you need use the package manager <a href="http://mxcl.github.com/homebrew/">Homebrew</a>. The only catch I met on OS X is that I need upgrade Fuse4X driver manually for some wired reason to avoid "incompatible with the kernel version" error. Upgrading is simple. Download dmg plus mouse click stuff only. See <a href="http://fuse4x.github.com/faq.html">FAQ</a> for details. </p> <p> For the usage of CurlFtpFS, see <a href="https://wiki.archlinux.org/index.php/Mount_FTP">HERE</a> for documentation. It's for Linux. But totally fine for OS X users. </p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/notes-on-using-gnus/">Practical guide to use Gnus with Gmail</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-10-12T17:14:00+00:00">2012-10-12 17:14</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/notes-on-using-gnus/#disqus_thread" data-disqus-identifier="cache/posts/notes-on-using-gnus.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/email/" rel="tag">email</a></li>
           <li><a class="tag p-category" href="categories/gmail/" rel="tag">gmail</a></li>
           <li><a class="tag p-category" href="categories/gnus/" rel="tag">gnus</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>
The article is moved to <a href="https://github.com/redguardtoo/mastering-emacs-in-one-year-guide/blob/master/gnus-guide-en.org">GitHub</a>.</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/the-latest-version-of-yasnippet-is-not-compatible-with-auto-complete-enemacsyasnippetauto-complete/">The latest version of yasnippet is NOT compatible with auto-complete</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-09-28T20:54:00+00:00">2012-09-28 20:54</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/the-latest-version-of-yasnippet-is-not-compatible-with-auto-complete-enemacsyasnippetauto-complete/#disqus_thread" data-disqus-identifier="cache/posts/the-latest-version-of-yasnippet-is-not-compatible-with-auto-complete-enemacsyasnippetauto-complete.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/auto/" rel="tag">auto</a></li>
           <li><a class="tag p-category" href="categories/complete/" rel="tag">complete</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/yasnippet/" rel="tag">yasnippet</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>Yes. The latest yasnippet (yasnippet-20120822.52) changed too many APIs and I cannot figure out how to work around it. Upgrading to the latest auto-complete (auto-complete-20120922.1815) won't solve the problem. </p> <p> See <a href="https://github.com/capitaomorte/yasnippet/issues/311">https://github.com/capitaomorte/yasnippet/issues/311</a> for the details. </p> <p> So here is the fix. You can use older version of yasnippet (yasnippet-20120718) and wait until the issue is fixed. </p> <p> Here is the link of older version, <a href="http://dl.dropbox.com/u/858862/yasnippet-20120718.tar.gz">http://dl.dropbox.com/u/858862/yasnippet-20120718.tar.gz</a>. </p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/why-facebook-app-for-android-pad-sucks/">Why Facebook app for android pad sucks?</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-09-28T19:50:00+00:00">2012-09-28 19:50</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/why-facebook-app-for-android-pad-sucks/#disqus_thread" data-disqus-identifier="cache/posts/why-facebook-app-for-android-pad-sucks.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/android/" rel="tag">android</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/facebook/" rel="tag">facebook</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>I don't use facebook. I just record my roommates' complaining. </p> <p> Here are his points, </p>
<dl>
<dt>failed to take full advantage of big screen of android pad</dt>
<dd>The right blank margin could be used to display comments instead, as some application has done. </dd> <dt>scroll down/up to view the images sucks</dt>
<dd>Slow and hard to locate the exact item he wants. </dd> <dt>Performance may be not good enough</dt>
<dd>Especially when viewing the images, it's not as fluent as other applications. </dd> </dl>
</div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/python-code-to-migrate-the-mysql-database-enmysqldatabasepython/">python code to migrate the MySQL database</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-08-22T12:08:00+00:00">2012-08-22 12:08</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/python-code-to-migrate-the-mysql-database-enmysqldatabasepython/#disqus_thread" data-disqus-identifier="cache/posts/python-code-to-migrate-the-mysql-database-enmysqldatabasepython.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/database/" rel="tag">database</a></li>
           <li><a class="tag p-category" href="categories/en/" rel="tag">en</a></li>
           <li><a class="tag p-category" href="categories/mysql/" rel="tag">mysql</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>
The script reads configuration and requires python 2.4.
</p>
<div class="org-src-container">

<pre><code class="lang-python">#!/usr/bin/python
import sys
import os
import string
import time
import datetime
import getopt

#############
# CONFIG
#############
DB_NAME='mydb'
DB_PASSWORD='111111'
DB_USER='root'
DB_HOST='mylinux0'
SQL_DB_SCHEMA=os.path.abspath("db_schema.sql")
SQL_CREATE_TABLE=os.path.abspath("000.sql")
CLONE_TABLES=['MyJobs','MyUsers']

#############
# GLOBALS
#############
backup_db=False
migration=False
config=None
verbose=False
delete=False
remote=False

def sql_cmd(cmd):
    if remote:
        return 'mysql -h %s -u %s -p%s -e " %s " %s' % (DB_HOST,DB_USER,DB_PASSWORD,cmd,DB_NAME)
    return 'mysql -u %s -p%s -e " %s " %s' % (DB_USER,DB_PASSWORD,cmd,DB_NAME)

def sql_script(script):
    if remote:
        return 'mysql -h %s -u %s -p%s %s &lt; %s' % (DB_HOST,DB_USER,DB_PASSWORD,DB_NAME,script)
    return 'mysql -u %s -p%s %s &lt; %s' % (DB_USER,DB_PASSWORD,DB_NAME,script)


def make_sql_to_create_table():
    s=open(SQL_DB_SCHEMA).read()
    for t in CLONE_TABLES:
        s=s.replace(t,t+'2')
    open(SQL_CREATE_TABLE,'w').write(s)

def backup_database():
    fname="%s-%s.dump.gz" % (DB_NAME,time.strftime('%Y%m%d%H%M%S', time.gmtime()))
    if remote:
        cmd="mysqldump -h %s -u %s -p%s --compact %s|gzip -9 &gt; %s" % (DB_HOST,DB_USER,DB_PASSWORD,DB_NAME,fname)
    else:
        cmd="mysqldump -u %s -p%s --compact %s|gzip -9 &gt; %s" % (DB_USER,DB_PASSWORD,DB_NAME,fname)

    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

def delete_db_records():
    cmd=sql_cmd("delete from sources;delete from cameras;")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

def package():
    cmd="tar zcvf migrate-db.tar.gz *.sql migrate.py .migrate_*"
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

def read_config(config):
    global DB_NAME
    global DB_PASSWORD
    global DB_USER
    global DB_HOST
    f=open(config,"r")
    for line in f:
        a=line.split("=")
        if len(a)!=2:
            continue
        n=a[0].strip()
        v=a[1].strip()
        if n=="DB_NAME":
            DB_NAME=v
        elif n=="DB_PASSWORD":
            DB_PASSWORD=v
        elif n=="DB_USER":
            DB_USER=v
        elif n=="DB_HOST":
            DB_HOST=v

def usage():
    print '''
USAGE: python migrate.py [OPTIONS]

OPTIONS:
    -h, --help
        print this help

    -b, --backup-database
        backup the old database before migration (recommended)

    -m, --migrate
        donot start migration

    -v, --verbose
        print database related information

    -p, --package
        packge all the scripts into migrate-db.tar.gz

    -d, --delete-db-records
        delete database records so we can restart migration

    -c, --config

SAMPLES:
    python migrate.py -b                        #back database and exit
    python migrate.py -m                        #start migration right now
    python migrate.py -b -m                     #backup the database and start the migration (recommended)
    python migrate.py -v                        #print database information and exit
    python migrate.py -c .migrate_staging -v    #print staging database information and exit
'''

def show_info():
    print '''
==Database Information
name:{name}
password:{password}
user:{user}
host:{host}
'''.format(name=DB_NAME, password=DB_PASSWORD,user=DB_USER,host=DB_HOST)

def confirm(prompt=None, resp=False):
    """prompts for yes or no response from the user. Returns True for yes and
    False for no.

    'resp' should be set to the default value assumed by the caller when
    user simply types ENTER.

    &gt;&gt;&gt; confirm(prompt='Create Directory?', resp=True)
    Create Directory? [y]|n:
    True
    &gt;&gt;&gt; confirm(prompt='Create Directory?', resp=False)
    Create Directory? [n]|y:
    False
    &gt;&gt;&gt; confirm(prompt='Create Directory?', resp=False)
    Create Directory? [n]|y: y
    True

    """

    if prompt is None:
        prompt = 'WARNING: DONOT run me twice and migration CANNOT be rolled back, GO?'

    if resp:
        prompt = '%s [%s]|%s: ' % (prompt, 'y', 'n')
    else:
        prompt = '%s [%s]|%s: ' % (prompt, 'n', 'y')

    while True:
        ans = raw_input(prompt)
        if not ans:
            return resp
        if ans not in ['y', 'Y', 'n', 'N']:
            print 'please enter y or n.'
            continue
        if ans == 'y' or ans == 'Y':
            return True
        if ans == 'n' or ans == 'N':
            return False

if __name__=="__main__":
    '''
    @see http://linux.byexamples.com/archives/366/python-how-to-run-a-command-line-within-python/
    '''
    try:
        opts, args = getopt.getopt(sys.argv[1:], "hbmvpdc:r", ["help", "backup-database","--migrate","--verbose","--package","--delete-db-records","--config=","--remote"])
    except getopt.GetoptError, err:
        print str(err) # will print something like "option -a not recognized"
        usage()
        exit(2)

    if len(opts)==0:
        usage()
        exit(2)

    for o, a in opts:
        if o in ("-h", "--help"):
            usage()
            sys.exit()
        elif o in ("-v", "--verbose"):
            verbose=True
        elif o in ("-c", "--config"):
            config=a
            print config
        elif o in ("-d", "--delete-db-records"):
            delete=True
        elif o in ("-p", "--package"):
            package()
            exit(0)
        elif o in ("-b", "--backup-database"):
            backup_db=True
        elif o in ("-m", "--migrate"):
            migration=True
        elif o in ("-r", "--remote"):
            remote=True
        else:
            assert False, "unhandled option"

    if config!=None:
        read_config(config)

    if delete:
        delete_db_records()
        sys.exit()

    if verbose:
        show_info()
        sys.exit()

    if backup_db:
        backup_database()

    if migration==False:
        exit(0)

    if confirm()==False:
        print "Aborting ..."
        exit(0)

    make_sql_to_create_table()

    print "==START MIGRATION"

    # test data base connection
    cmd=sql_cmd('show databases;use %s;' % (DB_NAME))
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    cmd=sql_script("000.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    os.system(sql_cmd("insert into migrate (Action) values ('001.sql')"))
    cmd=sql_script("001.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    os.system(sql_cmd("insert into migrate (Action) values ('002.sql')"))
    cmd=sql_script("002.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    os.system(sql_cmd("insert into migrate (Action) values ('003.sql')"))
    cmd=sql_script("003.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    os.system(sql_cmd("insert into migrate (Action) values ('004.sql')"))
    cmd=sql_script("004.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    os.system(sql_cmd("insert into migrate (Action) values ('005.sql')"))
    cmd=sql_script("005.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    os.system(sql_cmd("insert into migrate (Action) values ('006.sql')"))
    cmd=sql_script("006.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    os.system(sql_cmd("insert into migrate (Action) values ('100.sql')"))
    cmd=sql_script("100.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    cmd=sql_script("insert_sample_sources.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    cmd=sql_script("app_config.sql")
    print "==WILL RUN [ %s ]" % (cmd)
    os.system(cmd)
    print "==DONE"

    print "==END MIGRATION"
# vim: set expandtab tabstop=4 shiftwidth=4:
</code></pre>

</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/emacs-zhong-de-zi-dong-wan-chen-wan-quan-zhi-nan/">Emacs中的自动完成(Auto Completion)完全指南</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2012-08-21T14:50:00+00:00">2012-08-21 14:50</time>
</div>
                <div class="stats">
                    
    
    <a href="posts/emacs-zhong-de-zi-dong-wan-chen-wan-quan-zhi-nan/#disqus_thread" data-disqus-identifier="cache/posts/emacs-zhong-de-zi-dong-wan-chen-wan-quan-zhi-nan.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/completion/" rel="tag">completion</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/intellisense/" rel="tag">intellisense</a></li>
           <li><a class="tag p-category" href="categories/zh/" rel="tag">zh</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <p>
作者: 陈斌(redguardtoo)
</p>

<p>
更新时间: <span class="timestamp-wrapper"><span class="timestamp">&lt;2017-04-05 Wed&gt;</span></span>
</p>

<p>
原创时间: <span class="timestamp-wrapper"><span class="timestamp">&lt;2012-08-21 Tue&gt;</span></span>
</p>

<p>
Emacs比普通IDE的Intellisense强大,例如可输入当前文件名(带或者不带文件名后缀都可以).
</p>

<p>
我不是来赞美Emacs的强大的,我是来吐槽的.自动完成框架太多,功能重叠,让人困扰.
</p>

<p>
所以本文目的有两个:
</p>
<ul class="org-ul">
<li>说明哪些框架流行</li>
<li>如何使用框架</li>
</ul>
<div id="outline-container-org5d6ec5a" class="outline-2">
<h3 id="org5d6ec5a">概述</h3>
<div class="outline-text-2" id="text-org5d6ec5a">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">函数/插件名</th>
<th scope="col" class="org-left">快捷键</th>
<th scope="col" class="org-left">使用频率</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">company-mode (结合clang)</td>
<td class="org-left">不需要 (也可启用TAB)</td>
<td class="org-left">高</td>
</tr>
<tr>
<td class="org-left">hippie-expand</td>
<td class="org-left">M-/</td>
<td class="org-left">高</td>
</tr>
<tr>
<td class="org-left">evil-mode</td>
<td class="org-left">C-n/C-p(完成词),C-x C-n/p(完成行)</td>
<td class="org-left">高</td>
</tr>
<tr>
<td class="org-left">auto-complete (结合clang)</td>
<td class="org-left">TAB</td>
<td class="org-left">低</td>
</tr>
<tr>
<td class="org-left">complete-symbol</td>
<td class="org-left">C-M-i</td>
<td class="org-left">低</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org85a8950" class="outline-2">
<h3 id="org85a8950">auto-complete结合clang</h3>
<div class="outline-text-2" id="text-org85a8950">
<p>
<a href="http://emacswiki.org/emacs/AutoComplete">auto-complete</a>是第三方开发的插件,提供了自动完成需要的支持(例如在命令行环境下对下拉菜单的模拟).
</p>

<p>
而<a href="http://clang.llvm.org">clang</a>是苹果公司C/C++/Objective-C编译器,对C++语法的解析很好.
</p>

<p>
显然,这种l案只适用于 <code>Clang</code> 支持的语言.
</p>

<p>
需要通过<a href="http://emacswiki.org/wiki/ELPA">elpa(Emacs的AppStore)</a>安装第三方插件 <code>auto-complete</code> 和<a href="https://github.com/brianjcj/auto-complete-clang">auto-complete-clang</a>.
</p>

<p>
具体配置请参考我的<a href="https://github.com/redguardtoo/emacs.d/blob/903aeb10c316c0f43b35bc0dc6101eea3f729da7/init-auto-complete.el">init-auto-complete.el</a>.
</p>

<p>
已被company-mode取代,不推荐.
</p>
</div>
</div>
<div id="outline-container-orgf9bc64e" class="outline-2">
<h3 id="orgf9bc64e">company-mode</h3>
<div class="outline-text-2" id="text-orgf9bc64e">
<p>
<a href="https://github.com/company-mode/company-mode">company-mode</a>和auto-complete功能类似，唯一的区别是clang以及其他语言支持已内置，所以不需要安装其他elisp插件或者额外配置.目前我已用company-mode代替了auto-complete.
</p>
</div>
</div>
<div id="outline-container-org1b9a870" class="outline-2">
<h3 id="org1b9a870">hippie-expand</h3>
<div class="outline-text-2" id="text-org1b9a870">
<p>
<a href="http://emacswiki.org/emacs/HippieExpand">hippie-expand</a>是Emacs自带的自动完成框架.
</p>

<p>
其默认的一些特色功能(例如,完成词/文件名/行的功能,或在 <code>minibuffer</code> 中使用)可作为 <code>company-mode</code> 补充.
</p>
</div>
</div>
<div id="outline-container-org5ef1dc7" class="outline-2">
<h3 id="org5ef1dc7">complete-symbol</h3>
<div class="outline-text-2" id="text-org5ef1dc7">
<p>
Emacs自带的一个函数,我对这个方案感觉一般,因为在Emacs23中,它默认仅仅调用了后台的ctags而已.
</p>

<p>
<code>hippie-expand</code> 经过调教也可用 <code>Ctags</code>,且默认特色功能比 <code>complete-symbol</code> 多,所以我没兴趣配置第三个自动完成框架了.
</p>

<p>
通过阅读Emacs24的ChangeLog,我发现 <code>complete-symbol</code> 经过配置后可以用 <code>semantic</code> 作为语法解析后端(Emacs23.4也支持,不明白为什么把该特性放在Emacs24的ChangeLog介绍).
</p>

<p>
<a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Semantic.html">semantic</a>是lisp写的语法解析器,Emacs自带,智能程度介于ctags和clang之间,解析速度比较慢,如果机器配置较差会很卡.
</p>

<p>
我不喜欢这个语法解析器,过去在 <code>Semantic</code> 尚是<a href="http://cedet.sourceforge.net">Cedet</a>的一个组件时,我折腾过 <code>Cedet</code>,当时感觉速度慢,配置繁琐,不稳定.
</p>

<p>
<code>Semantic</code> 支持多种语言,如C++/Java.
</p>

<p>
配置请参考我的<a href="https://github.com/redguardtoo/emacs.d/blob/903aeb10c316c0f43b35bc0dc6101eea3f729da7/init-semantic.el">init-semantic.el</a>(注意,我不用 <code>Semantic</code>,所以相应代码被注释了.你可取消注释).
</p>

<p>
已被 <code>company-mode</code> 取代,不推荐.
</p>
</div>
</div>
<div id="outline-container-org7777961" class="outline-2">
<h3 id="org7777961">evil-mode</h3>
<div class="outline-text-2" id="text-org7777961">
<p>
<a href="http://emacswiki.org/emacs/Evil">Evil-mode</a>把Emacs模拟成了Vim,是我最喜欢的第三方插件,其自动完成很简单,就是根据当前文件内容自动完成词或行.
</p>

<p>
值得推荐是因为我也是重度Vim用户,Vim的快捷键已成为我本能了.
</p>

<p>
无需配置,启动 <code>evil-mode</code> 即可,参见我的<a href="https://github.com/redguardtoo/emacs.d/blob/master/init-evil.el">init-evil.el</a>.
</p>
</div>
</div>
<div id="outline-container-org1e2553e" class="outline-2">
<h3 id="org1e2553e">其他</h3>
<div class="outline-text-2" id="text-org1e2553e">
<p>
我的一个想法. 类似于Evil的完成行.但是可以扫瞄指定目录中所有的文件,列出相似的行.
</p>

<p>
优点在于:
</p>
<ul class="org-ul">
<li>匹配可以更加宽容一点</li>
<li>使用目前最快的grep工具如<a href="https://github.com/BurntSushi/ripgrep">ripgrep</a>扫瞄文本</li>
</ul>
<p>
实现见<a href="https://github.com/redguardtoo/emacs.d/blob/24dd0d7/lisp/init-ivy.el">init-ivy</a>中的=counsel-complete-line-by-grep=.
</p>

<p>
试用好几个月了,非常好用.
</p>
</div>
</div>
<div id="outline-container-org2dd24dc" class="outline-2">
<h3 id="org2dd24dc">小结</h3>
<div class="outline-text-2" id="text-org2dd24dc">
<p>
自动完成包括前端用户界面和后端语法解析引擎两个部分.
</p>

<p>
作为前端的用户界面, <code>company-mode</code> 和 <code>auto-complete</code> 相当成熟.
</p>

<p>
后端 <code>Clang</code> 最优秀.
</p>

<p>
<code>Ctags</code> 谈不上语法解析,只是正则表达式罢了,但是因此才能通吃所有语言.
</p>

<p>
<code>Semantic</code> 支持的语言比 <code>Clang</code> 多一点,性能和稳定性比较差.
</p>

<p>
作为一个C++程序员,我过去用 <code>auto-complete</code> 加上 <code>Clang</code>,现在用 <code>company-mode</code> 加 <code>Clang</code>.
</p>

<p>
脚本语言(Ruby/Python/Javascript)用 <a href="https://en.wikipedia.org/wiki/Ctags">Ctags</a> 加 <a href="https://github.com/company-mode/company-mode">company-mode</a> 加 <a href="https://github.com/redguardtoo/company-ctags">company-ctags</a>.
</p>

<p>
基于框架自己发明新技术会更好用.</p>
</div>
</div>
            </div>
        </div>
    
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-7.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-5.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="chenbin0";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2024         <a href="mailto:chenbin.sh@gmail.com">Chen Bin</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
         document.addEventListener('DOMContentLoaded', function() {
           var items = document.getElementsByClassName('timeago'), e, pd;
           for (var i = 0; i < items.length; i++) {
             e = items[i];
             pd = moment(new Date(e.getAttribute('datetime')));
             e.innerHTML = pd.fromNow();
             e.setAttribute('title', pd.format('LLLL'));
           }
         });
        </script>
</body>
</html>
